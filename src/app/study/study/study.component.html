<div class="container">
  <h1 class="title">問題：{{ problem.title }}</h1>
  <div class="box">
    <ng-container *ngIf="display === false; else showAnswer">
      <h2 class="box__item">英文</h2>
      <form>
        <span *ngFor="let text of englishTextList; index as i">
          <span class="word">
            <ng-container *ngIf="isBlankList[i]; else showWord">
              <span
                *ngIf="
                  englishTextList[i].slice(-1) === ',' ||
                    englishTextList[i].slice(-1) === '.';
                  else normalTerm
                "
              >
                <input
                  autocomplete="off"
                  type="text"
                  [formControl]="fills.controls[blankList[i]]"
                  [size]="wordLengthList[i]"
                />
                <span>{{ englishTextList[i].slice(-1) }}</span>
              </span>

              <ng-template #normalTerm>
                <input
                  [formControl]="fills.controls[blankList[i]]"
                  autocomplete="off"
                  type="text"
                  [size]="wordLengthList[i] + 1"
                />
              </ng-template>
            </ng-container>
            <ng-template #showWord>
              {{ englishTextList[i] }}
            </ng-template>
          </span>
        </span>
      </form>
      <h2 class="box__item">和訳</h2>
      <p>
        {{ problem.japaneseText }}
      </p>
      <div class="button-layout">
        <button class="box__button" mat-raised-button (click)="onSubmit()">
          回答する
        </button>
      </div>
    </ng-container>
  </div>
  <ng-template #showAnswer>
    <app-answer
      [blankList]="blankList"
      [isBlankList]="isBlankList"
      [englishTextList]="englishTextList"
      [filledDict]="filledDict"
      [answerDict]="answerDict"
      [wordLengthList]="wordLengthList"
      [correctAnswerRate]="correctAnswerRate"
      [problemNum]="problemNum"
      [correctAnswerNum]="correctAnswerNum"
      (transitioned)="onTransitioned($event)"
    ></app-answer>
  </ng-template>
</div>
